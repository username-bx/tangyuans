import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as o,d as r,o as a}from"./app-CLBvuo9w.js";const n={};function l(p,e){return a(),o("div",null,e[0]||(e[0]=[r('<h1 id="https自签证书" tabindex="-1"><a class="header-anchor" href="#https自签证书"><span>https自签证书</span></a></h1><ol><li>安装Certbot客户端</li></ol><p>yum install certbot</p><ol start="2"><li>获取证书<br> certbot certonly --webroot -w /var/www/example -d <a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com</a> -d <a href="http://www.example.com" target="_blank" rel="noopener noreferrer">www.example.com</a></li></ol><blockquote><blockquote><p>这个命令会为 <a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com</a> 和 <a href="http://www.example.com" target="_blank" rel="noopener noreferrer">www.example.com</a> 这两个域名生成一个证书，使用 --webroot 模式会在 /var/www/example 中创建 .well-known 文件夹，这个文件夹里面包含了一些验证文件，certbot 会通过访问 <a href="http://example.com/.well-known/acme-challenge" target="_blank" rel="noopener noreferrer">example.com/.well-known/acme-challenge</a> 来验证你的域名是否绑定的这个服务器。这个命令在大多数情况下都可以满足需求，</p></blockquote></blockquote><ol start="3"><li>但是有些时候我们的一些服务并没有根目录，例如一些微服务，这时候使用 --webroot 就走不通了。certbot 还有另外一种模式 --standalone ， 这种模式不需要指定网站根目录，他会自动启用服务器的443端口，来验证域名的归属。我们有其他服务（例如nginx）占用了443端口，就必须先停止这些服务，在证书生成完毕后，再启用。</li></ol><p>certbot certonly --standalone -d <a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com</a> -d <a href="http://www.example.com" target="_blank" rel="noopener noreferrer">www.example.com</a></p><p>证书生成完毕后，我们可以在 /etc/letsencrypt/live/ 目录下看到对应域名的文件夹，里面存放了指向证书的一些快捷方式。</p><ol start="4"><li><p>Nginx 配置启用 HTTPS</p></li><li><p>centOS 安装</p></li></ol><p>sudo yum install epel-release<br> sudo yum install certbot-nginx</p><ol start="2"><li>停止您的 Web 服务器服务 否则你会得到以下错误</li></ol><p>Problem binding to port 80: Could not bind to IPv4 or IPv6</p><ol start="3"><li>继续生成 Let’s Encrypt 免费 SSL 证书：</li></ol><p>certbot certonly --standalone --preferred-challenges http -d <a href="http://my-domain.com" target="_blank" rel="noopener noreferrer">my-domain.com</a> -d <a href="http://www.my-domain.com" target="_blank" rel="noopener noreferrer">www.my-domain.com</a></p><blockquote><blockquote><p>-d 选项采用域名。您可以-d在单个命令中使用多个选项。例如</p></blockquote></blockquote><ol start="4"><li>如果这是您第一次运行 certbot，系统会提示您输入电子邮件地址并同意服务条款。执行此操作后， certbot 将与 Let’s Encrypt 服务器通信，然后运行质询以验证您是否控制要为其申请证书的域。</li></ol><p>如果成功，certbot 将显示一条消息，告诉您该过程已成功以及您的证书存储在何处</p><ol start="5"><li><p>列出您保存在/etc/letsencrypt/live/my-domain.com 目录中的证书 。</p></li><li><p>为了让您的Web 服务器使用 Let’s Encrypt 免费 SSL 证书，您需要在其配置中指定它们。例如，如果您使用 Nginx，则需要将以下块添加到您的域配置文件中/etc/nginx/sites-enabled/my-domain.conf</p></li></ol><p>server {<br> listen 443;<br> server_name <a href="http://my-domain.com" target="_blank" rel="noopener noreferrer">my-domain.com</a>;<br> ssl on;<br> ssl_certificate /etc/letsencrypt/live/my-domain.com/fullchain.pem;<br> ssl_certificate_key /etc/letsencrypt/live/my-domain.com/privkey.pem;<br> }</p>',19)]))}const i=t(n,[["render",l]]),s=JSON.parse('{"path":"/software/17-certbot.html","title":"certbot https自签证书","lang":"zh-CN","frontmatter":{"title":"certbot https自签证书","shortTitle":"certbot https自签证书","icon":"pen-to-square","date":"2024-08-15T00:00:00.000Z","order":17,"tag":["certbot"],"auther":"Tang Yuan","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"certbot https自签证书\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-08-15T00:00:00.000Z\\",\\"dateModified\\":\\"2025-06-24T07:53:36.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Tang Yuan\\",\\"url\\":\\"\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/software/17-certbot.html"}],["meta",{"property":"og:site_name","content":"汤圆"}],["meta",{"property":"og:title","content":"certbot https自签证书"}],["meta",{"property":"og:description","content":"https自签证书 安装Certbot客户端 yum install certbot 获取证书 certbot certonly --webroot -w /var/www/example -d example.com -d www.example.com 这个命令会为 example.com 和 www.example.com 这两个域名生成一个证书..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-24T07:53:36.000Z"}],["meta",{"property":"article:tag","content":"certbot"}],["meta",{"property":"article:published_time","content":"2024-08-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-24T07:53:36.000Z"}],["meta",{"name":"keywords","content":"certbot"}]],"description":"https自签证书 安装Certbot客户端 yum install certbot 获取证书 certbot certonly --webroot -w /var/www/example -d example.com -d www.example.com 这个命令会为 example.com 和 www.example.com 这两个域名生成一个证书..."},"git":{"createdTime":1737623393000,"updatedTime":1750751616000,"contributors":[{"name":"benjamin","username":"benjamin","email":"benjamin@manka.co.jp","commits":1,"url":"https://github.com/benjamin"},{"name":"Benjamin","username":"Benjamin","email":"benjaminma@example.com","commits":1,"url":"https://github.com/Benjamin"}]},"readingTime":{"minutes":2.09,"words":628},"filePathRelative":"software/17-certbot.md","excerpt":"\\n<ol>\\n<li>安装Certbot客户端</li>\\n</ol>\\n<p>yum install certbot</p>\\n<ol start=\\"2\\">\\n<li>获取证书<br>\\ncertbot certonly --webroot -w /var/www/example -d <a href=\\"http://example.com\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">example.com</a> -d <a href=\\"http://www.example.com\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">www.example.com</a></li>\\n</ol>","autoDesc":true}');export{i as comp,s as data};
